import{d as $}from"./chunk-UCMERK44.js";import{a as R}from"./chunk-VVWPEHCO.js";import{a as L,m as M}from"./chunk-45C3OXQ2.js";import{c as j,d as D}from"./chunk-EXFBBE3R.js";import"./chunk-MMKAGRZ3.js";import"./chunk-DMHPLCCW.js";import{$ as h,Db as c,Eb as l,Fb as B,Gb as O,La as I,Lb as F,Nb as V,Pa as e,Rb as p,Sb as d,Tb as S,_a as x,ca as g,eb as T,gb as b,kb as y,ma as _,mb as k,na as v,nb as w,ob as i,pb as a,qb as u,sc as P,tb as E,vb as f,wb as C}from"./chunk-HXXKVFF7.js";var G=(o,s)=>s.product.id,N=o=>["/order",o];function U(o,s){o&1&&(i(0,"h2",1),c(1),p(2,"translate"),a()),o&2&&(e(),l(d(2,1,"cart.your Cart is empty")))}function q(o,s){if(o&1){let m=E();i(0,"div",6)(1,"div",9),u(2,"img",10),a(),i(3,"div",11)(4,"div")(5,"h3"),c(6),p(7,"text"),a(),i(8,"p",1),c(9),p(10,"translate"),p(11,"currency"),a(),i(12,"button",12),f("click",function(){let t=_(m).$implicit,r=C();return v(r.removecart(t.product.id))}),u(13,"i",13),c(14),p(15,"translate"),a()(),i(16,"div",14)(17,"span",15),f("click",function(){let t=_(m).$implicit,r=C();return v(r.updatecount(t.product.id,t.count+1))}),u(18,"i",16),a(),i(19,"span",17),c(20),a(),i(21,"span",15),f("click",function(){let t=_(m).$implicit,r=C();return v(r.updatecount(t.product.id,t.count-1))}),u(22,"i",18),a()()()()}if(o&2){let m=s.$implicit;e(2),b("src",m.product.imageCover,I)("alt",m.product.title),e(4),l(S(7,7,m.product.title,2)),e(3),O("",d(10,10,"cart.price:")," ",S(11,12,m.price,"GBP"),""),e(5),B("",d(15,15,"cart.Remove")," "),e(6),l(m.count)}}var et=(()=>{let s=class s{constructor(){this._CartService=h(L),this._ToastrService=h(M),this.numOfCartItems=x(0),this.cartdata=x({}),this.cartfall=x(!0)}ngOnInit(){this.cartsub=this._CartService.GetLoggedusercart().subscribe({next:n=>{console.log(n.data),this.cartfall.set(!1),this.cartdata.set(n.data),this.numOfCartItems.set(n.numOfCartItems)}})}ngOnDestroy(){this.cartsub?.unsubscribe()}removecart(n){this._CartService.RemovespecificcartItem(n).subscribe({next:t=>{console.log(t),this.cartdata.set(t.data),this._CartService.cartNumber.set(t.numOfCartItems),console.log(t.numOfCartItems),this.numOfCartItems.set(t.numOfCartItems),this._ToastrService.info("remove")}})}updatecount(n,t){t>0&&this._CartService.Updatecartproductquantity(n,t).subscribe({next:r=>{console.log(r.data),this.cartdata.set(r.data),this._ToastrService.success("count update")}})}clearcart(){this._CartService.Clearusercart().subscribe({next:n=>{console.log(n),n.message=="success"&&(this.cartdata.set({}),this._CartService.cartNumber.set(0),this._ToastrService.success("clear Done"))}})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=g({type:s,selectors:[["app-cart"]],standalone:!0,features:[F],decls:26,vars:21,consts:[[1,"my-5","p-5","shadow","rounded-3","mx-auto"],[1,"text-main"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"d-flex","align-items-center","justify-content-between","p-2"],[1,"pt-3"],[1,"row","mb-3","border-bottom"],[1,"text-center"],[1,"btn-main","my-2","w-25",3,"routerLink"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10","d-flex","align-content-center","justify-content-between"],[1,"text-danger","cr","btn","p-0","border-0","btn-lg",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fs-5"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(t,r){t&1&&(i(0,"section",0),T(1,U,3,3,"h2",1),i(2,"div",2)(3,"h2",1),c(4),p(5,"translate"),a(),i(6,"button",3),f("click",function(){return r.clearcart()}),c(7),p(8,"translate"),a()(),i(9,"div",4)(10,"h5",5),c(11),p(12,"translate"),i(13,"strong",1),c(14),a()(),i(15,"h5"),c(16),p(17,"translate"),i(18,"strong",1),c(19),a()()(),k(20,q,23,17,"div",6,G),i(22,"div",7)(23,"button",8),c(24),p(25,"translate"),a()()()),t&2&&(e(),y(1,r.cartfall()?1:-1),e(3),l(d(5,9,"cart.Cart Shop")),e(3),l(d(8,11,"cart.Clear Cart")),e(4),l(d(12,13,"cart.Total Price:")),e(3),l(r.cartdata().totalCartPrice),e(2),l(d(17,15,"cart.total number of items:")),e(3),l(r.numOfCartItems()),e(),w(r.cartdata().products),e(3),b("routerLink",V(19,N,r.cartdata()._id)),e(),l(d(25,17,"cart.Order")))},dependencies:[P,R,$,D,j]});let o=s;return o})();export{et as CartComponent};
