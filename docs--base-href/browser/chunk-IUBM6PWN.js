import{a as N}from"./chunk-VNQPLSN3.js";import"./chunk-G5KA7DMQ.js";import{a as R,b as v,c as A,d as G,f as D,g as M,h as k,i as $,k as j}from"./chunk-IAPOHVWS.js";import{c as V}from"./chunk-UCMERK44.js";import{c as q,d as L}from"./chunk-EXFBBE3R.js";import"./chunk-MMKAGRZ3.js";import"./chunk-DMHPLCCW.js";import{$ as w,Db as d,Eb as u,Fb as S,Lb as T,Ob as F,Pa as o,Rb as p,Sb as m,_a as b,ca as P,eb as c,gb as g,kb as _,lc as B,ma as x,na as y,ob as l,pb as r,qb as C,tb as h,vb as E,wb as f}from"./chunk-HXXKVFF7.js";var I=(t,a)=>({"is-valid":t,"is-invalid":a});function z(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Email is Required")))}function H(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Enter Valid Email")))}function J(t,a){if(t&1&&(l(0,"div",7),c(1,z,3,3,"P",9)(2,H,3,3),r()),t&2){let e,n=f(2);o(),_(1,(e=n.verifyemail.get("email"))!=null&&e.getError("required")?1:(e=n.verifyemail.get("email"))!=null&&e.getError("email")?2:-1)}}function K(t,a){t&1&&(l(0,"span"),C(1,"i",10),r())}function O(t,a){if(t&1){let e=h();l(0,"form",3),E("ngSubmit",function(){x(e);let i=f();return y(i.verifyemailsubmit())}),l(1,"div",4)(2,"label",5),d(3),p(4,"translate"),r(),C(5,"input",6),c(6,J,3,1,"div",7),r(),l(7,"button",8),d(8),p(9,"translate"),c(10,K,2,0,"span"),r()()}if(t&2){let e,n,i=f();g("formGroup",i.verifyemail),o(3),u(m(4,7,"forgetpassword.email")),o(2),g("ngClass",F(11,I,!((e=i.verifyemail.get("email"))!=null&&e.errors)&&(((e=i.verifyemail.get("email"))==null?null:e.touched)||((e=i.verifyemail.get("email"))==null?null:e.dirty)),((e=i.verifyemail.get("email"))==null?null:e.errors)&&(((e=i.verifyemail.get("email"))==null?null:e.touched)||((e=i.verifyemail.get("email"))==null?null:e.dirty)))),o(),_(6,(n=i.verifyemail.get("email"))!=null&&n.errors&&((n=i.verifyemail.get("email"))!=null&&n.touched||(n=i.verifyemail.get("email"))!=null&&n.dirty)?6:-1),o(),g("disabled",i.verifyemail.invalid),o(),S("",m(9,9,"forgetpassword.verifyemail")," "),o(2),_(10,i.IsLoading()?10:-1)}}function Q(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.resetCode is Required")))}function U(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Enter valid resetCode")))}function W(t,a){if(t&1&&(l(0,"div",7),c(1,Q,3,3,"P",9)(2,U,3,3),r()),t&2){let e,n=f(2);o(),_(1,(e=n.verifycode.get("resetCode"))!=null&&e.getError("required")?1:(e=n.verifycode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function X(t,a){t&1&&(l(0,"span"),C(1,"i",10),r())}function Y(t,a){if(t&1){let e=h();l(0,"form",3),E("ngSubmit",function(){x(e);let i=f();return y(i.verifycodesubmit())}),l(1,"div",4)(2,"label",11),d(3),p(4,"translate"),r(),C(5,"input",12),c(6,W,3,1,"div",7),r(),l(7,"button",8),d(8),p(9,"translate"),c(10,X,2,0,"span"),r()()}if(t&2){let e,n,i=f();g("formGroup",i.verifycode),o(3),u(m(4,7,"forgetpassword.resetCode")),o(2),g("ngClass",F(11,I,!((e=i.verifycode.get("resetCode"))!=null&&e.errors)&&(((e=i.verifycode.get("resetCode"))==null?null:e.touched)||((e=i.verifycode.get("resetCode"))==null?null:e.dirty)),((e=i.verifycode.get("resetCode"))==null?null:e.errors)&&(((e=i.verifycode.get("resetCode"))==null?null:e.touched)||((e=i.verifycode.get("resetCode"))==null?null:e.dirty)))),o(),_(6,(n=i.verifycode.get("resetCode"))!=null&&n.errors&&((n=i.verifycode.get("resetCode"))!=null&&n.touched||(n=i.verifycode.get("resetCode"))!=null&&n.dirty)?6:-1),o(),g("disabled",i.verifycode.invalid),o(),S("",m(9,9,"forgetpassword.verifycode")," "),o(2),_(10,i.IsLoading()?10:-1)}}function Z(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Email is Required")))}function ee(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Enter Valid Email")))}function te(t,a){if(t&1&&(l(0,"div",7),c(1,Z,3,3,"P",9)(2,ee,3,3),r()),t&2){let e,n=f(2);o(),_(1,(e=n.verifyemail.get("email"))!=null&&e.getError("required")?1:(e=n.verifyemail.get("email"))!=null&&e.getError("email")?2:-1)}}function ie(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.newPassword is Required ")))}function ne(t,a){t&1&&(l(0,"P",9),d(1),p(2,"translate"),r()),t&2&&(o(),u(m(2,1,"forgetpassword.Enter valid newPassword")))}function oe(t,a){if(t&1&&(l(0,"div",7),c(1,ie,3,3,"P",9)(2,ne,3,3),r()),t&2){let e,n=f(2);o(),_(1,(e=n.resetpassword.get("newPassword"))!=null&&e.getError("required")?1:(e=n.resetpassword.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function re(t,a){t&1&&(l(0,"span"),C(1,"i",10),r())}function le(t,a){if(t&1){let e=h();l(0,"form",3),E("ngSubmit",function(){x(e);let i=f();return y(i.resetpasswordsubmit())}),l(1,"div",4)(2,"label",5),d(3),p(4,"translate"),r(),C(5,"input",13),c(6,te,3,1,"div",7),r(),l(7,"div",4)(8,"label",14),d(9),p(10,"translate"),r(),C(11,"input",15),c(12,oe,3,1,"div",7),r(),l(13,"button",8),d(14),p(15,"translate"),c(16,re,2,0,"span"),r()()}if(t&2){let e,n,i,s=f();g("formGroup",s.resetpassword),o(3),u(m(4,9,"forgetpassword.email")),o(2),g("ngClass",F(15,I,!((e=s.verifyemail.get("email"))!=null&&e.errors)&&(((e=s.verifyemail.get("email"))==null?null:e.touched)||((e=s.verifyemail.get("email"))==null?null:e.dirty)),((e=s.verifyemail.get("email"))==null?null:e.errors)&&(((e=s.verifyemail.get("email"))==null?null:e.touched)||((e=s.verifyemail.get("email"))==null?null:e.dirty)))),o(),_(6,(n=s.verifyemail.get("email"))!=null&&n.errors&&((n=s.verifyemail.get("email"))!=null&&n.touched||(n=s.verifyemail.get("email"))!=null&&n.dirty)?6:-1),o(3),u(m(10,11,"forgetpassword.newPassword")),o(3),_(12,(i=s.resetpassword.get("newPassword"))!=null&&i.errors&&((i=s.resetpassword.get("newPassword"))!=null&&i.touched||(i=s.resetpassword.get("newPassword"))!=null&&i.dirty)?12:-1),o(),g("disabled",s.resetpassword.invalid),o(),S("",m(15,13,"forgetpassword.resetpassword")," "),o(2),_(16,s.IsLoading()?16:-1)}}var ve=(()=>{let a=class a{constructor(){this._FormBuilder=w($),this._AuthService=w(N),this._Router=w(V),this.step=b(1),this.verifyemail=this._FormBuilder.group({email:[null,[v.required,v.email]]}),this.verifycode=this._FormBuilder.group({resetCode:[null,[v.required,v.pattern(/^\w{6,}$/)]]}),this.resetpassword=this._FormBuilder.group({email:[null,[v.required,v.email]],newPassword:[null,[v.required,v.pattern(/^\w{6,}$/)]]}),this.IsLoading=b(!1)}verifyemailsubmit(){this.IsLoading.set(!0);let n=this.verifyemail.get("email")?.value;this.resetpassword.get("email")?.patchValue(n),this._AuthService.setverifyemail(this.verifyemail.value).subscribe({next:i=>{console.log(i),this.IsLoading.set(!1),i.statusMsg=="success"&&this.step.set(2)}})}verifycodesubmit(){this.IsLoading.set(!0),this._AuthService.setverifycode(this.verifycode.value).subscribe({next:n=>{console.log(n),this.IsLoading.set(!1),n.status=="Success"&&this.step.set(3)}})}resetpasswordsubmit(){this.IsLoading.set(!0),this._AuthService.resetpassword(this.resetpassword.value).subscribe({next:n=>{console.log(n),this.IsLoading.set(!1),localStorage.setItem("userToken",n.token),this._AuthService.userData(),this._Router.navigate(["/home"])}})}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=P({type:a,selectors:[["app-forgerpassword"]],standalone:!0,features:[T],decls:7,vars:4,consts:[[1,"py-5","my-5"],[1,"text-center","text-main","p-2"],[1,"shadow","rounded-3","p-2",3,"formGroup"],[1,"shadow","rounded-3","p-2",3,"ngSubmit","formGroup"],[1,"my-3"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],[1,"btn-main",3,"disabled"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode"],["formControlName","resetCode","id","resetCode","type","text",1,"form-control",3,"ngClass"],["readonly","","formControlName","email","id","email","type","email",1,"form-control",3,"ngClass"],["for"," newPassword"],["formControlName","newPassword","id","newPassword","type","password",1,"form-control"]],template:function(i,s){i&1&&(l(0,"section",0)(1,"h2",1),d(2),p(3,"translate"),r(),c(4,O,11,14,"form",2)(5,Y,11,14)(6,le,17,18),r()),i&2&&(o(2),u(m(3,2,"forgetpassword.Forget Password")),o(2),_(4,s.step()==1?4:s.step()==2?5:s.step()==3?6:-1))},dependencies:[j,D,R,A,G,M,k,B,L,q]});let t=a;return t})();export{ve as ForgerpasswordComponent};
