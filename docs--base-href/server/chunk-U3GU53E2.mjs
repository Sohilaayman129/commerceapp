import './polyfills.server.mjs';
import{a as L}from"./chunk-ZKBCB5CL.mjs";import{a as F,b as _,c as q,d as A,f as P,g as R,h as D,i as M,k as G}from"./chunk-BGWMWEUQ.mjs";import{c as N,d as w}from"./chunk-IJNXVPII.mjs";import"./chunk-WVUI6REW.mjs";import{a as T}from"./chunk-2IXKHGWE.mjs";import"./chunk-AGJTRWHM.mjs";import{Cb as a,Db as p,Eb as S,Kb as B,Oa as t,Qb as d,Rb as s,W as C,Za as y,_ as b,db as f,fb as E,jb as h,nb as n,ob as i,pb as v,ub as I,vb as O}from"./chunk-4PMUYQ54.mjs";import"./chunk-VVCT4QZE.mjs";function V(e,r){e&1&&(n(0,"div",6)(1,"P",13),a(2),d(3,"translate"),i()()),e&2&&(t(2),p(s(3,1,"order.details is Required")))}function k(e,r){e&1&&(n(0,"P",13),a(1),d(2,"translate"),i()),e&2&&(t(),S(" ",s(2,1,"order.phone is Required")," "))}function j(e,r){e&1&&(n(0,"P",14),a(1),d(2,"translate"),i()),e&2&&(t(),p(s(2,1,"order.Enter valid phone")))}function $(e,r){if(e&1&&(n(0,"div",6),f(1,k,3,3,"P",13)(2,j,3,3),i()),e&2){let g,l=O();t(),h(1,(g=l.orders.get("phone"))!=null&&g.getError("required")?1:(g=l.orders.get("phone"))!=null&&g.getError("pattern")?2:-1)}}function z(e,r){e&1&&(n(0,"div",6)(1,"P",13),a(2),d(3,"translate"),i()()),e&2&&(t(2),p(s(3,1,"order.city is Required")))}function H(e,r){e&1&&(n(0,"span"),v(1,"i",15),i())}var te=(()=>{let r=class r{constructor(){this._FormBuilder=C(M),this._ActivatedRoute=C(T),this._OrderService=C(L),this.orders=this._FormBuilder.group({details:[null,[_.required]],phone:[null,[_.required,_.pattern(/01[0125][0-9]{8,}$/)]],city:[null,[_.required]]}),this.cartId=y(" "),this.IsLoading=y(!1)}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:l=>{this.cartId.set(l.get("id")),console.log(this.cartId())}})}orderSubmit(){this.IsLoading.set(!0),console.log(this.orders.value),this.orders.valid?this.ordersub=this._OrderService.CheckOut(this.cartId(),this.orders.value).subscribe({next:l=>{console.log(l),this.IsLoading.set(!1),l.status=="success"&&window.open(l.session.url,"_self")}}):(this.orders.setErrors({mismatch:!0}),this.orders.markAllAsTouched())}ngOnDestroy(){this.ordersub?.unsubscribe()}};r.\u0275fac=function(x){return new(x||r)},r.\u0275cmp=b({type:r,selectors:[["app-order"]],standalone:!0,features:[B],decls:28,vars:20,consts:[[1,"my-5","shadow","rounded-3","mx-auto","w-50"],[1,"text-main","text-center","pt-5"],[3,"ngSubmit","formGroup"],[1,"m-2"],["for","details"],["formControlName","details","id","details","type","text",1,"form-control"],[1,"alert","alert-danger","w-50"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control"],["for","city"],["formControlName","city","id","city","type","tel",1,"form-control"],[1,"text-center","p-3"],["type","submit",1,"btn-main","w-25"],[1,"m-0","text-danger"],[1,"m-0","ng-star-inserted"],[1,"fas","fa-spin","fa-spinner"]],template:function(x,o){if(x&1&&(n(0,"section",0)(1,"h2",1),a(2),d(3,"translate"),i(),n(4,"form",2),I("ngSubmit",function(){return o.orderSubmit()}),n(5,"div",3)(6,"label",4),a(7),d(8,"translate"),i(),v(9,"textarea",5),f(10,V,4,3,"div",6),i(),n(11,"div",3)(12,"label",7),a(13),d(14,"translate"),i(),v(15,"input",8),f(16,$,3,1,"div",6),i(),n(17,"div",3)(18,"label",9),a(19),d(20,"translate"),i(),v(21,"input",10),f(22,z,4,3,"div",6),i(),n(23,"div",11)(24,"button",12),a(25),d(26,"translate"),f(27,H,2,0,"span"),i()()()()),x&2){let m,u,c;t(2),p(s(3,10,"order.Address")),t(2),E("formGroup",o.orders),t(3),p(s(8,12,"order.details")),t(3),h(10,(m=o.orders.get("details"))!=null&&m.errors&&((m=o.orders.get("details"))!=null&&m.touched||(m=o.orders.get("details"))!=null&&m.dirty)?10:-1),t(3),p(s(14,14,"order.phone")),t(3),h(16,(u=o.orders.get("phone"))!=null&&u.errors&&((u=o.orders.get("phone"))!=null&&u.touched||(u=o.orders.get("phone"))!=null&&u.dirty)?16:-1),t(3),p(s(20,16,"order.city")),t(3),h(22,(c=o.orders.get("city"))!=null&&c.errors&&((c=o.orders.get("city"))!=null&&c.touched||(c=o.orders.get("city"))!=null&&c.dirty)?22:-1),t(3),S("",s(26,18,"order.Pay Now")," "),t(2),h(27,o.IsLoading()?27:-1)}},dependencies:[G,P,F,q,A,R,D,w,N]});let e=r;return e})();export{te as OrderComponent};
